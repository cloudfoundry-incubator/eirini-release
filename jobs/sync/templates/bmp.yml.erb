---
processes:
  - name: sync # same as BOSH-job name means `-p <process>` is not needed
    executable: /var/vcap/packages/eirini/bin/eirini
    args:
    - sync
    - --ccApi
    - <%= p('eirini_sync.ccAPI') %>
    - --ccUser
    - <%= p('eirini_sync.ccUser') %>
    - --ccPass
    - <%= p('eirini_sync.ccPassword') %>
    - --kubeconfig
    - /var/vcap/jobs/eirini_sync/config/kube.yml
    - --externalEiriniAddress
    - <%= p('eirini_sync.registry_address') %>
    - --backend
    - <%= p('eirini_sync.backend') %>
    - --adminUser
    - <%= p('eirini_sync.adminUser') %>
    - --adminPass
    - <%= p('eirini_sync.adminPassword') %>
    - --namespace
    - <%= p('eirini_sync.kube_namespace') %>
    - --kubeEndpoint
    - <%= p('eirini_sync.kube_endpoint') %>
    <% if p("eirini_sync.skipSslValidation") %>- --skipSslValidation<% end %>
    limits:
      memory: 3G
      processes: 10
      open_files: 100000
    ephemeral_disk: true # mount /var/vcap/data/the_job ; default `false`
                         # NOTE: /var/vcap/data/the_job/tmp is always mounted `rw`
